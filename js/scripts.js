"use strict";$(document).ready(function(){for(var e=!1,t=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),s=0;s<t.length;s++)"ver=2"==t[s].split(".")[0]&&(e=!0);e&&$(".creation__success.version1").remove()}),$(document).ready(function(){for(var e=!1,t=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),s=0;s<t.length;s++)"cens"==t[s].split("=")[0]&&(e=!0);e&&($(".version1").hide(),$(".censor").show())}),$(".faqPage__item").on("click",function(){$(this).toggleClass("active"),$(this).children(".faqPage__item-text").slideToggle(300)}),$(document).ready(function(){$(".resume__item-help").on("click",function(){$(this).siblings(".resume__popup").css("display","flex").animate({width:["100%","swing"]},600)}),$(".resume__popup-close").on("click",function(){$(this).parent(".resume__popup").fadeOut("slow")});var a=document.querySelectorAll(".resume__item"),o=!1,t=new function(){this.data={userName:"Посетитель",gender:null,activity:null,protein:null,vegetables:null,food:null,labor:null,habbits:null,age:null,weight:null,height:null,new_weight:null},this.handleChange=function(e,t){var s=this;if(e in this.data){this.data[e]=t;for(var i=0;i<a.length;i++)!function(e,t){var s=t.gender,i=t.age,a=t.height,o=t.weight,n=t.activity,l=t.new_weight,c=$(".resume__item_".concat(e," .resume__item-text")),r=$(".resume__item_".concat(e));function d(){for(var e=0;e<=10;e++)r.removeClass("class-".concat(e))}{var u,m,h,v,f,p,g,_,b;1==e?(u=Math.pow(10,2),h=Math.ceil(o/(a/100*(a/100))*100)/100,m=$(".resume__item-drop"),$(".resume__item-num").animateNumber({number:h*u,numberStep:function(e,t){e=Math.floor(e)/u,t=$(t.elem),e=(e=e.toFixed(2)).toString().replace(".",",");t.text(e)}},{easing:"swing",duration:1e3}),h<=16?(d(),m.addClass("resume__item-drop--veryskin"),c.html("Выраженный дефицит массы тела")):16<h&&h<=18.5?(d(),m.addClass("resume__item-drop--skin"),c.html("Недостаточная (дефицит) масса тела")):18.5<h&&h<=24.99?(d(),m.addClass("resume__item-drop--normal"),c.html("Норма")):24.99<h&&h<=35?(d(),m.addClass("resume__item-drop--fat"),c.html("Ожирение")):35<h&&(d(),m.addClass("resume__item-drop--veryfat"),c.html("Ожирение резкое"))):2==e?(t="",v=$(".resume__item-look--young path"),h=$(".resume__item-look--adult path"),m=$(".resume__item-look--old path"),1==s?(t=Math.round(.629*i+18.56),$(".resume__item-look--man").css("display","block")):(t=Math.round(.58*i+17.24),$(".resume__item-look--woman").css("display","block")),t<=20?(v.css("fillOpacity","1"),h.css("fillOpacity","0.4"),m.css("fillOpacity","0.4")):20<t&&t<=40?(h.css("fillOpacity","1"),v.css("fillOpacity","0.4"),m.css("fillOpacity","0.4")):41<t&&(m.css("fillOpacity","1"),h.css("fillOpacity","0.4"),v.css("fillOpacity","0.4")),h=t%10,v="лет",t<21?v="лет":1==h?v="год":1<h&&h<5?v="года":5<h&&(v="лет"),c.html("".concat(t," ").concat(v))):3==e?(f=v=g=p="",v=1==s?88.362+13.397*o+4.799*a-5.677*i:447.593+9.247*o+3.098*a-4.33*i,1==n?f=1.2:2==n?f=1.375:3==n?f=1.55:4==n?f=1.725:5==n&&(f=1.9),p=Math.round(v*f-v*f*.2),g=p+100,c.html(p+"-"+g)):4==e?(f=$(".resume__item-scale"),p=$(".resume__item-scale-holder").outerHeight()/100,g="",90<=o?1==n?g=3:2==n||3==n?g=3.5:4!=n&&5!=n||(g=3.9):80<=o?1==n?g=2.5:2==n||3==n?g=2.9:4!=n&&5!=n||(g=3.3):70<=o?1==n?g=2.3:2==n||3==n?g=2.5:4!=n&&5!=n||(g=3):60<=o?1==n?g=1.8:2==n||3==n?g=2.3:4!=n&&5!=n||(g=2.6):50<=o&&(1==n?g=1.5:2==n||3==n?g=2:4!=n&&5!=n||(g=2.3)),f.css({height:g/5*100*p}),c.html("".concat(g," л"))):5==e||(6==e?(b="",b=l<o?(_="",o-l<(_=100<=o?8:70<=o?6:5)?l:o-_):(_=o+o/100*7)<=l?_:l,c.html(Math.round(b)+" кг")):7==e&&(b="",b=l<o?(e="",o-l<(e=100<=o?8:70<=o?6:5)?l:o-e):(o=o+o/100*7)<=l?o:l,c.html(Math.round(b)+" кг")))}}(i,this.data);o=Object.keys(this.data).every(function(e){return!!s.data[e]})}},this.checkKey=function(e){return!!this.data[e]}},e=document.querySelectorAll(".getplan__item"),s=document.getElementsByName("activity"),n=document.getElementsByName("meat"),l=document.getElementsByName("seafood"),i=document.querySelectorAll(".js-protein"),c=document.getElementsByName("vegetables"),r=document.getElementsByName("food"),d=document.getElementsByName("labor"),u=document.getElementsByName("habbits"),m=document.querySelectorAll(".js-limit-2"),h=document.querySelectorAll(".js-limit-3"),v=!1;function f(e,t){t.value.split("").length>e&&(t.value=t.value.substring(0,e))}function p(e){e=e.closest("label");e.classList.contains("active")?e.classList.remove("active"):e.classList.add("active")}function g(e,t){for(var s=0;s<e.length;s++)e[s].closest("label").classList.remove("active");t.closest("label").classList.add("active")}function _(e){for(var t=0;t<e.length;t++)if(e[t].checked)return 1}e.forEach(function(e){e.addEventListener("click",function(){t.handleChange("gender",this.value)})}),s.forEach(function(e){e.addEventListener("change",function(){g(s,e),t.handleChange("activity",this.value)})}),n.forEach(function(o){o.addEventListener("change",function(){var e=o.closest("label"),t=e.classList.contains("active"),s="meat"===o.dataset.restrict;if(s){for(var i=0;i<n.length;i++)n[i].closest("label").classList.remove("active");t?e.classList.remove("active"):e.classList.add("active")}else if(t||s)e.classList.remove("active");else{e.classList.add("active");for(var a=0;a<n.length;a++)"meat"===n[a].dataset.restrict&&n[a].closest("label").classList.contains("active")&&n[a].closest("label").classList.remove("active")}})}),l.forEach(function(o){o.addEventListener("change",function(){var e=o.closest("label"),t=e.classList.contains("active"),s="seafood"===o.dataset.restrict;if(s){for(var i=0;i<l.length;i++)l[i].closest("label").classList.remove("active");t?e.classList.remove("active"):e.classList.add("active")}else if(t||s)e.classList.remove("active");else{e.classList.add("active");for(var a=0;a<l.length;a++)"seafood"===l[a].dataset.restrict&&l[a].closest("label").classList.contains("active")&&l[a].closest("label").classList.remove("active")}})}),i.forEach(function(e){e.addEventListener("change",function(){_(i)?t.handleChange("protein",this.value):t.handleChange("protein",null)})}),c.forEach(function(e){e.addEventListener("change",function(){p(e),_(c)?t.handleChange("vegetables",this.value):t.handleChange("vegetables",null)})}),u.forEach(function(e){e.addEventListener("change",function(){p(e),_(u)?t.handleChange("habbits",this.value):t.handleChange("habbits",null)})}),r.forEach(function(e){e.addEventListener("change",function(){p(e),_(r)?t.handleChange("food",this.value):t.handleChange("food",null)})}),d.forEach(function(e){e.addEventListener("change",function(){g(d,e),t.handleChange("labor",this.value)})}),m.forEach(function(e){e.addEventListener("keyup",function(){f(2,e)})}),h.forEach(function(e){e.addEventListener("keyup",function(){f(3,e)})}),document.getElementsByName("person-data").forEach(function(e){e.addEventListener("change",function(){"age"===e.id?t.handleChange("age",parseInt(e.value)):"height"===e.id?t.handleChange("height",parseInt(e.value)):"weight"===e.id?t.handleChange("weight",parseInt(e.value)):"wish-weight"===e.id&&t.handleChange("new_weight",parseInt(e.value))})});var b=0,y=0,L=document.querySelectorAll(".sidebar__figure"),w=document.querySelectorAll(".progress-bar__img"),k=(document.querySelectorAll(".progress-bar__item"),document.querySelectorAll(".scene__stage-arts")),S=document.querySelectorAll(".js-stage"),E=document.querySelectorAll(".js-section"),T=document.querySelectorAll(".js-next-stage"),q=document.querySelectorAll(".js-prev-stage"),e=document.querySelectorAll(".js-next-section"),m=document.querySelectorAll(".js-prev-section"),h=document.querySelectorAll(".js-home");document.querySelector(".footer"),document.querySelector(".header");function C(){void 0!==E[b]&&(E[b].classList.add("active"),$(".resume-content").hasClass("active")&&$(".reviews__slider").slick({infinite:!0,slidesToShow:2,slidesToScroll:1,arrows:!0,responsive:[{breakpoint:1115,settings:{slidesToShow:2,slidesToScroll:1,arrows:!1,infinite:!0,dots:!0}},{breakpoint:740,settings:{slidesToShow:1,slidesToScroll:1,arrows:!1,infinite:!0,dots:!0}}]}))}function A(){void 0!==E[b]&&E[b].classList.remove("active")}function x(){void 0!==w[y]&&w[y].classList.add("show"),void 0!==w[y+1]&&w[y+1].classList.add("active"),void 0!==w[y+2]&&w[y+2].classList.add("show"),void 0!==L[y]&&L[y].classList.add("active"),void 0!==k[y]&&k[y].classList.add("active"),void 0!==S[y]&&S[y].classList.add("active")}function j(){void 0!==w[y]&&w[y].classList.remove("show"),void 0!==w[y+1]&&w[y+1].classList.remove("active"),void 0!==w[y+2]&&w[y+2].classList.remove("show"),void 0!==L[y]&&L[y].classList.remove("active"),void 0!==k[y]&&k[y].classList.remove("active"),void 0!==S[y]&&S[y].classList.remove("active")}function O(){w[y].classList.remove("active"),A(),b++,x(),C()}T.forEach(function(e){e.addEventListener("click",function(){$("html, body").stop().animate({scrollTop:0},500),t.checkKey(e.dataset.check)&&(j(),y++,x(),$(".js-progress-bar-slider").slick("slickNext"))})}),q.forEach(function(e){e.addEventListener("click",function(){$("html, body").stop().animate({scrollTop:0},500),j(),y--,x(),$(".js-progress-bar-slider").slick("slickPrev")})}),e.forEach(function(e){e.addEventListener("click",function(){$("html, body").stop().animate({scrollTop:0},500),O()})}),m.forEach(function(e){e.addEventListener("click",function(){$("html, body").stop().animate({scrollTop:0},500),A(),b--,C(),w[y].classList.add("active"),w[y+1].classList.remove("active")})}),h.forEach(function(e){e.addEventListener("click",function(){A(),j(),y=b=0,C(),x()})});var N=document.querySelector(".progress-bar");function I(){var t=document.querySelector(".creation__success"),s=document.querySelector(".fill-box__line"),i=document.querySelector(".fill-box"),a=document.querySelector(".fill-box__progress"),o=document.querySelectorAll(".creation__text"),n=+(1e4/o.length).toFixed(),l=0,c=0;a.textContent="0";var r=setTimeout(function e(){l++,a.textContent="".concat(l,"%"),r=setTimeout(e,96),100<=l&&clearTimeout(r)},96);o[c].classList.add("active");var d=document.querySelector(".creation__success"),u=setTimeout(function e(){o[c]&&o[c].classList.contains("active")&&o[c].classList.remove("active"),o[++c]&&o[c].classList.add("active"),u=setTimeout(e,n),c>=o.length&&(clearTimeout(u),setTimeout(function(){t.classList.add("active")},500),v=!1,s.style.strokeDasharray="765.48",s.classList.remove("load-animation"),i.style.display="none",d.style.display="block",t.classList.contains("censor")&&O())},n)}document.querySelector(".js-count-start").addEventListener("click",function(){o&&(O(),N.style.display="none",v||(document.querySelector(".creation__success").classList.remove("active"),document.querySelector(".fill-box__loader").classList.add("load-animation"),setTimeout(I,200)))}),$(".form__check-input").prop("checked",!1),$(".form__btn").prop("disabled",!0),$(".form__check-input").click(function(){$(".form__btn").prop("disabled",!$(".form__btn").prop("disabled"))}),$(".form").submit(function(e){e.preventDefault();var t=$(this).children(".email").val(),s=$(this).children(".name").val();/^[a-zA-Zа-яА-ЯёЁ0-9'][a-zA-Z-а-яА-ЯёЁ0-9' ]+[a-zA-Zа-яА-ЯёЁ0-9']?$/.test(s)&&/^([a-z0-9_-]+\.)*[a-z0-9_-]+@[a-z0-9_-]+(\.[a-z0-9_-]+)*\.[a-z]{2,6}$/.test(t.toLowerCase())?($(".error").remove(),$(".form__input").val(""),document.location.href="pay?name="+s+"&email="+t.toLowerCase()):(e.preventDefault(),$(".error").text("Укажите корректный email или name"))})});var sliderIsLive=!1;sliderIsLive?$(".js-progress-bar-slider").slick("unslick"):window.innerWidth<=900&&!sliderIsLive&&$(".js-progress-bar-slider").slick({dots:!1,infinite:!1,speed:300,slidesToShow:6,slidesToScroll:1,arrows:!0,nextArrow:'<button class="progress-bar__next"></button>',prevArrow:'<button class="progress-bar__prev"></button>',appendArrows:$(".progress-bar__arrows"),responsive:[{breakpoint:650,settings:{slidesToShow:4,slidesToScroll:1}},{breakpoint:520,settings:{slidesToShow:2,slidesToScroll:1}}]}),window.addEventListener("resize",function(){window.innerWidth<=900?($(".js-progress-bar-slider").slick({dots:!1,infinite:!1,speed:300,slidesToShow:6,slidesToScroll:1,arrows:!0,nextArrow:'<button class="progress-bar__next"></button>',prevArrow:'<button class="progress-bar__prev"></button>',appendArrows:$(".progress-bar__arrows"),responsive:[{breakpoint:650,settings:{slidesToShow:4,slidesToScroll:1}},{breakpoint:520,settings:{slidesToShow:2,slidesToScroll:1}}]}),sliderIsLive=!0):$(".js-progress-bar-slider").slick("unslick")});var intr,time=900;function start_timer(){intr=setInterval(tick,1e3)}function tick(){time-=1;var e=Math.floor(time/60),t=time-60*e;0==e&&0==t&&clearInterval(intr),t=10<=t?t:"0"+t,$(".minutes").html(10<=e?e:"0"+e),$(".seconds").html(t)}